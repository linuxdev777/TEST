<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flupkins on Base â€“ Mint</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#f8cdda,#c2e9fb);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card {
  background:#fff;
  padding:28px;
  border-radius:16px;
  max-width:420px;
  width:100%;
  text-align:center;
  box-shadow:0 15px 35px rgba(0,0,0,.15);
}
input, button {
  width:100%;
  padding:12px;
  margin-top:12px;
  font-size:16px;
  border-radius:10px;
}
button {
  border:none;
  background:#ff7a7a;
  color:white;
  cursor:pointer;
}
button:disabled {
  background:#ccc;
}
.info {
  margin-top:10px;
  font-size:14px;
  word-break:break-all;
}
</style>
</head>

<body>
<div class="card">
  <h2>Flupkins on Base</h2>
  <p>Direct mint on Base</p>

  <p><strong>Price:</strong> 0.00000001 ETH each</p>

  <input id="qty" type="number" min="1" value="1">

  <button id="connect">Connect Wallet</button>
  <button id="mint" disabled>Mint</button>

  <div class="info" id="wallet"></div>
  <div class="info" id="status"></div>
</div>

<script>
const CONTRACT = "0xb84ed5b1b7e402b11e7d14101ee3a2f3f5502035";
const PRICE = ethers.utils.parseEther("0.00000001");
const BASE_CHAIN_ID = "0x2105"; // Base mainnet

let provider, signer;

document.getElementById("connect").onclick = async () => {
  if (!window.ethereum) return alert("Wallet not found");

  provider = new ethers.providers.Web3Provider(window.ethereum);
  await provider.send("eth_requestAccounts", []);

  const network = await provider.getNetwork();
  if (network.chainId !== 8453) {
    await window.ethereum.request({
      method: "wallet_switchEthereumChain",
      params: [{ chainId: BASE_CHAIN_ID }]
    });
  }

  signer = provider.getSigner();
  document.getElementById("wallet").innerText =
    "Connected: " + await signer.getAddress();

  document.getElementById("mint").disabled = false;
};

document.getElementById("mint").onclick = async () => {
  const qty = Number(document.getElementById("qty").value);
  if (qty < 1) return;

  try {
    document.getElementById("status").innerText = "Minting...";
    const tx = await signer.sendTransaction({
      to: CONTRACT,
      value: PRICE.mul(qty)
    });
    await tx.wait();
    document.getElementById("status").innerText = "Mint successful ðŸŽ‰";
  } catch (e) {
    console.error(e);
    document.getElementById("status").innerText = "Mint failed âŒ";
  }
};
</script>
</body>
</html>
