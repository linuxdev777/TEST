<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Flupkins on Base â€“ Mint</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: linear-gradient(135deg, #f8cdda, #c2e9fb);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.card {
  background: #fff;
  padding: 30px;
  border-radius: 16px;
  width: 100%;
  max-width: 420px;
  text-align: center;
  box-shadow: 0 20px 40px rgba(0,0,0,.15);
}

h1 { margin-top: 0; }

input {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  font-size: 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 14px;
  border: none;
  border-radius: 12px;
  background: #ff7a7a;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

button:disabled {
  background: #ccc;
  cursor: not-allowed;
}

.info {
  margin-top: 10px;
  font-size: 14px;
  word-break: break-all;
}
</style>
</head>

<body>

<div class="card">
  <h1>Flupkins on Base</h1>
  <p>Mint your Flupkins on Base Network</p>

  <p><strong>Price:</strong> 0.00000001 ETH each</p>

  <input id="amount" type="number" min="1" value="1" />

  <button id="connect">Connect Wallet</button>
  <button id="mint" disabled>Mint</button>

  <div class="info" id="wallet"></div>
  <div class="info" id="status"></div>
</div>

<script>
const CONTRACT = "0xb84ed5b1b7e402b11e7d14101ee3a2f3f5502035";
const PRICE = ethers.utils.parseEther("0.00000001");

// ABI con cantidad
const ABI = [
  "function mint(uint256 amount) public payable"
];

let provider, signer, contract;

const connectBtn = document.getElementById("connect");
const mintBtn = document.getElementById("mint");
const walletDiv = document.getElementById("wallet");
const statusDiv = document.getElementById("status");

connectBtn.onclick = async () => {
  if (!window.ethereum) {
    alert("No EVM wallet detected");
    return;
  }

  provider = new ethers.providers.Web3Provider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  signer = provider.getSigner();

  const address = await signer.getAddress();
  walletDiv.innerText = "Connected: " + address;

  contract = new ethers.Contract(CONTRACT, ABI, signer);
  mintBtn.disabled = false;
};

mintBtn.onclick = async () => {
  const amount = document.getElementById("amount").value;
  if (amount < 1) return;

  try {
    statusDiv.innerText = "Minting...";
    const totalCost = PRICE.mul(amount);

    const tx = await contract.mint(amount, {
      value: totalCost
    });

    await tx.wait();
    statusDiv.innerText = "Mint successful ðŸŽ‰";
  } catch (e) {
    console.error(e);
    statusDiv.innerText = "Mint failed âŒ";
  }
};
</script>

</body>
</html>


